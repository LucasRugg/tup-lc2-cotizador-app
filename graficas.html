
<!DOCTYPE html>
<html lang="en">

<head>
    <title></title>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <script src="https://cdn.jsdelivr.net/npm/chart.js@latest/dist/Chart.min.js" defer></script>
</head>

<body>
    POR FECHAS
    <canvas id="miGrafica"></canvas>
    TODOS
    <canvas id="miGrafica2"></canvas>
    TODOS 2
    <canvas id="miGrafica3"></canvas>
</body>
<script>
    const urls = {
        'DOLAR': 'https://dolarapi.com/v1/dolares/oficial',
        'BLUE': 'https://dolarapi.com/v1/dolares/blue',
        'MEP': 'https://dolarapi.com/v1/dolares/bolsa',
        'TAR': 'https://dolarapi.com/v1/dolares/tarjeta',
    }
    const etiquetas = [];
    const etiquetas2 = [];
    const etiquetas3 = [];
    const datosLinea = [];
    const datosLinea2 = [];
    const arrData = [];
    const arrData2 = [];
    let objDatos = {};
    let objDatos2 = {};
    let respuesta = '';

    async function obtenerCotizaciones() {

        try {

            etiquetas.push('09/06/2024','10/06/2024', '11/06/2024', '12/06/2024');//Fechas
            /*INICIO*/
           /* respuesta = await fetch(urls['DOLAR']);
            if (respuesta.ok) {
                const data = await respuesta.json();*/
                objDatos = {
                    label: 'USD OFICIAL',
                    data: [,680, 1000, 930], //Variación de precios
                    borderColor: "rgba(54, 162, 235, 1)",
                    backgroundColor: 'rgba(54, 162, 235, 0.2)', // Color de fondo
                    borderWidth: 1,
                    fill: false
                }
                datosLinea.push(objDatos);
           /* } else {
                alert('error');
            }*/
            /*FIN*/
            /*INICIO*/
            respuesta = await fetch(urls['BLUE']);
            if (respuesta.ok) {
                const data = await respuesta.json();
                objDatos = {
                    label: data.moneda + ' BLUE',
                    data: [data.compra, , data.compra - 100, data.compra + 500], //Variación de precios
                    borderColor: "red",
                    backgroundColor: "lightred", // Color de fondo
                    borderWidth: 1,
                    fill: false
                }
                datosLinea.push(objDatos);
            } else {
                alert('error');
            }
            /*FIN*/
            /*INICIO*/
            respuesta = await fetch(urls['MEP']);
            if (respuesta.ok) {
                const data = await respuesta.json();
                objDatos = {
                    label: data.moneda + ' MEP',
                    data: [data.compra, data.compra - 100, data.compra + 500], //Variación de precios
                    borderColor: "yellow",
                    backgroundColor: "lightyellow", // Color de fondo
                    borderWidth: 1,
                    fill: false
                }
                datosLinea.push(objDatos);
            } else {
                alert('error');
            }
            /*FIN*/
            respuesta = await fetch(urls['TAR']);
            if (respuesta.ok) {
                const data = await respuesta.json();
                objDatos = {
                    label: data.moneda + ' TARJETA',
                    data: [data.compra, data.compra - 100, data.compra + 500, data.compra - 100], //Variación de precios
                    borderColor: "green",
                    backgroundColor: "lightgreen", // Color de fondo
                    borderWidth: 1,
                    fill: false
                }
                datosLinea.push(objDatos);
            } else {
                alert('error');
            }
            /*FIN*/

            const ctx = document.getElementById("miGrafica").getContext("2d");
            new Chart(ctx, {
                type: "line",
                data: {
                    labels: etiquetas,
                    datasets: datosLinea
                }
            })
        }
        catch (error) {
            console.log(error);
        }

    }
    ;

    async function obtenerCotizaciones2() {

        try {
            respuesta = await fetch(urls['DOLAR']);
            if (respuesta.ok) {
                const data = await respuesta.json();
                etiquetas2.push(data.moneda + ' OFICIAL');//Monedas
                arrData.push(data.compra);
            } else {
                alert('error');
            }

            respuesta = await fetch(urls['BLUE']);
            if (respuesta.ok) {
                const data = await respuesta.json();
                etiquetas2.push(data.moneda + '  BLUE');//Monedas
                arrData.push(data.compra);
            } else {
                alert('error');
            }

            objDatos = {
                labels: etiquetas2,

                datasets: [{
                    label: "Cotizaciones",
                    data: arrData,
                    backgroundColor: 'rgb(04, 24, 124)',
                    borderColor: 'rgba(75, 192, 192, 1)',
                    borderWidth: 1
                }]

            };
            console.log(objDatos);



            var options = {
                scales: {
                    y: {
                        beginAtZero: true
                    }
                },
                plugins: {
                    datalabels: {
                        anchor: 'end',
                        align: 'end',
                        offset: 4,
                        color: 'red',
                        font: {
                            weight: 'bold',
                            size: 12
                        }
                    }
                }
            };

            const ctx = document.getElementById("miGrafica2").getContext("2d");
            new Chart(ctx, {
                type: "bar",
                data: objDatos,
                options: options
            })
        }
        catch (error) {
            console.log(error);
        }



    }
    ;

    async function obtenerCotizaciones3() {

        try {
            respuesta = await fetch(urls['DOLAR']);
            if (respuesta.ok) {
                const data = await respuesta.json();
                arrData2.push(data.compra)
                etiquetas3.push(data.moneda + ' OFICIAL');//etiquetas
            } else {
                alert('error');
            }

            respuesta = await fetch(urls['BLUE']);
            if (respuesta.ok) {
                const data = await respuesta.json();
                arrData2.push(data.compra)
                etiquetas3.push(data.moneda + ' BLUE');//etiquetas
            } else {
                alert('error');
            }

            respuesta = await fetch(urls['MEP']);
            if (respuesta.ok) {
                const data = await respuesta.json();
                arrData2.push(data.compra)
                etiquetas3.push(data.moneda + ' MEP');//etiquetas
            } else {
                alert('error');
            }

            respuesta = await fetch(urls['TAR']);
            if (respuesta.ok) {
                const data = await respuesta.json();
                arrData2.push(data.compra)
                etiquetas3.push(data.moneda + '  TARJETA');//etiquetas
            } else {
                alert('error');
            }

            objDatos2 = {
                label: 'Cotizaciones',
                data: arrData2, //Variación de precios
                borderColor: "green",
                backgroundColor: "lightgreen", // Color de fondo
                borderWidth: 1,
                fill: false
            }
            datosLinea2.push(objDatos2);

            const ctx = document.getElementById("miGrafica3").getContext("2d");
            new Chart(ctx, {
                type: "line",
                data: {
                    labels: etiquetas3,
                    datasets: datosLinea2
                }
            })
        }
        catch (error) {
            console.log(error);
        }
    }
    ;


    obtenerCotizaciones();
    obtenerCotizaciones2();
    obtenerCotizaciones3();

</script>

</html>